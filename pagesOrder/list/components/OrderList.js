"use strict";const e=require("../../../common/vendor.js"),r=require("../../../services/constants.js"),t=require("../../../services/order.js"),a=require("../../../services/pay.js");require("../../../utils/http.js"),require("../../../stores/index.js"),require("../../../stores/modules/member.js"),require("../../../stores/modules/address.js");const s=e.defineComponent({__name:"OrderList",props:{orderState:null},setup(s){const i=s,{safeAreaInsets:d}=e.index.getSystemInfoSync(),o={page:1,pageSize:5,orderState:i.orderState},n=e.ref([]);e.onMounted((()=>{(async()=>{const e=await t.getMemberOrderService(o);n.value=e.result.items})()}));return(t,s)=>{var i;return{a:e.f(n.value,((t,s,i)=>e.e({a:e.t(t.createTime),b:e.t(e.unref(r.orderStateList)[t.orderState].text),c:t.orderState>=e.unref(r.OrderState).DaiPingJia},(t.orderState,e.unref(r.OrderState).DaiPingJia,{}),{d:e.f(t.skus,((r,t,a)=>({a:r.image,b:e.t(r.name),c:e.t(r.attrsText),d:r.id}))),e:`/pagesOrder/detail/detail?id=${t.id}`,f:e.t(t.totalNum),g:e.t(t.payMoney),h:t.orderState===e.unref(r.OrderState).DaiFuKuan},t.orderState===e.unref(r.OrderState).DaiFuKuan?{i:e.o((s=>(async t=>{{const r=await a.getPayWxPayMiniPayService({orderId:t});e.wx$1.requestPayment(r.result)}e.index.showToast({title:"支付成功",icon:"success"}),n.value.find((e=>e.id=t)).orderState=r.OrderState.DaiFaHuo})(t.id)),t.id)}:e.e({j:`/pagesOrder/order/order?orderId=${t.id}`,k:t.orderState===e.unref(r.OrderState).DaiShouHuo},(t.orderState,e.unref(r.OrderState).DaiShouHuo,{})),{l:t.id}))),b:e.t("没有更多数据~"),c:(null==(i=e.unref(d))?void 0:i.bottom)+"px"}}}});wx.createComponent(s);
